var mbsRest=function(){var e=function(e){var r=e.split("^");return{id:r[0],name:_ListStockInfo[r[0]],price0:{ceil:parseFloat(r[1]),floor:parseFloat(r[2]),reference:parseFloat(r[3])},live:{match:{price:parseNumber(r[11]),volume:normaliseAmount(parseNumber(r[12]))},buy:[{price:parseNumber(r[4]),volume:normaliseAmount(parseNumber(r[5]))},{price:parseNumber(r[6]),volume:normaliseAmount(parseNumber(r[7]))},{price:parseNumber(r[8]),volume:normaliseAmount(parseNumber(r[9]))}],sell:[{price:parseNumber(r[13]),volume:normaliseAmount(parseNumber(r[14]))},{price:parseNumber(r[15]),volume:normaliseAmount(parseNumber(r[16]))},{price:parseNumber(r[17]),volume:normaliseAmount(parseNumber(r[18]))}],stats:{totalVolume:normaliseAmount(parseNumber(r[19])),high:parseNumber(r[21]),low:parseNumber(r[22]),average:parseNumber(r[20])},foreign:{buyVolume:normaliseAmount(parseNumber(r[25])),buyRoom:normaliseAmount(parseNumber(r[27])),sellAmount:normaliseAmount(parseNumber(r[26])),sellRoom:normaliseAmount(parseNumber(r[27]))}}}},r=function(r){console.log(APP.stock.codes),get(Url.mbsHttp.toUrl(Url.mbsHttp.full,APP.stock.codes),function(o){var s=o.split("|")[2].split("#"),t=new Set,a=APP.stock.codes,m;for(m=0;m<a.length;m++)t.add(a[m]);var u,n,p,c={};for(m=0,l=s.length;m<l;m++)u=s[m],n=u.substr(0,3),t.has(n)&&(p=e(u),c[p.id]=p);var i=[],b;for(m=0,l=a.length;m<l;m++)b=a[m],c.hasOwnProperty(b)&&i.push(c[a[m]]);APP.owner&&(APP.stock.stocks=updateStock(APP.stock.stocks,i)),r&&r()})};return r(function(){setInterval(function(){get(Url.mbsHttp.toUrl(Url.mbsHttp.full,APP.stock.codes),function(r){var o=r.split("|")[2].split("#"),s=new Set,t=APP.stock.codes,a;for(a=0;a<t.length;a++)s.add(t[a]);var m,u,n,p={};for(a=0,l=o.length;a<l;a++)m=o[a],u=m.substr(0,3),s.has(u)&&(n=e(m),p[n.id]=n);var c=[],i;for(a=0,l=t.length;a<l;a++)i=t[a],p.hasOwnProperty(i)&&c.push(p[t[a]]);APP.owner&&(APP.stock.stocks=updateStock(APP.stock.stocks,c))})},1e3)}),{reload:r}}();