var mbsRest=function(){var e=function(e){var r=e.split("^");return{id:r[0],name:_ListStockInfo[r[0]],price0:{ceil:parseFloat(r[1]),floor:parseFloat(r[2]),reference:parseFloat(r[3])},live:{match:{price:parseNumber(r[11]),volume:normaliseAmount(parseNumber(r[12]))},buy:[{price:parseNumber(r[4]),volume:normaliseAmount(parseNumber(r[5]))},{price:parseNumber(r[6]),volume:normaliseAmount(parseNumber(r[7]))},{price:parseNumber(r[8]),volume:normaliseAmount(parseNumber(r[9]))}],sell:[{price:parseNumber(r[13]),volume:normaliseAmount(parseNumber(r[14]))},{price:parseNumber(r[15]),volume:normaliseAmount(parseNumber(r[16]))},{price:parseNumber(r[17]),volume:normaliseAmount(parseNumber(r[18]))}],stats:{totalVolume:normaliseAmount(parseNumber(r[19])),high:parseNumber(r[21]),low:parseNumber(r[22]),average:parseNumber(r[20])},foreign:{buyVolume:normaliseAmount(parseNumber(r[25])),buyRoom:normaliseAmount(parseNumber(r[27])),sellAmount:normaliseAmount(parseNumber(r[26])),sellRoom:normaliseAmount(parseNumber(r[27]))}}}},r=function(e,r){null===e&&(e={live:{match:{},buy:{},sell:{},stats:{},foreign:{}}})},o=function(r){console.log(APP.stock.codes),get(Url.mbsHttp.toUrl(Url.mbsHttp.full,APP.stock.codes),function(o){var s=o.split("|")[2].split("#"),t=new Set,m=APP.stock.codes,a;for(a=0;a<m.length;a++)t.add(m[a]);var u,n,p,i={};for(a=0,l=s.length;a<l;a++)u=s[a],n=u.substr(0,3),t.has(n)&&(p=e(u),i[p.id]=p);var c=[],b;for(a=0,l=m.length;a<l;a++)b=m[a],i.hasOwnProperty(b)&&c.push(i[m[a]]);APP.stock.stocks=updateStock(APP.stock.stocks,c),r&&r()})};return o(function(){setInterval(function(){get(Url.mbsHttp.toUrl(Url.mbsHttp.change,APP.stock.codes),function(e){var r=APP.stock.codes,o=new Set,s;for(s=0;s<r.length;s++)o.add(r[s]);var t=e.split("#");for(s=0;s<t.length;s++)var m=t[s].substr(4)})},1e3)}),{reload:o}}();